@import data.viewModel.PageStatus

@(current: Int)(implicit pageStatuses: Map[Int, PageStatus])

@renderNavigation(entries: Seq[String]) = {

    <nav class="moj-navigation moj-navigation--top-bar">

        <h3 class="govuk-heading-s govuk-!-margin-top-3">Report sections:</h3>

        <span class="display-block margin-top"></span>

        <ul class="moj-navigation-list">
        @for((entry, index) <- entries.zipWithIndex) {
            @navigationEntry(index + 2, entry, current)
        }
        </ul>
    </nav>
    <div class="moj-footer-compensate"></div>
}

@navigationEntries(renderNavigation, entries => {

    if (pageStatuses.values().drop(1).dropRight(1).exists { pageStatus => !(pageStatus.isVisited && pageStatus.isValid) })
        entries.dropRight(1)
    else
        entries
})
