@import data._
@import helper._
@import paroleParom1Report.hiddenInputs._
@import play.Environment
@import data.viewModel.PageStatus
@import org.webjars.play.WebJarsUtil
@import fragment.popup
@import com.typesafe.config.Config

@(reportForm: Form[ParoleParom1ReportData], encrypter: String => String)(implicit pageStatuses: Map[Int, PageStatus], webJarsUtil: WebJarsUtil, environment: Environment, configuration: Config)

@implicitField = @{ FieldConstructor(govukElements.f) }

@recommendationHint = {
    <ul class="govuk-list govuk-list--bullet govuk-!-margin-bottom-0">
        <li>Consideration of what equality and diversity issues are present and how they can help inform your assessment and recommendation.</li>
        <li>Clear and succinct reasons for your recommendation that flow logically from the main body of your report - this will strengthen your point of view. The Parole Board will consider your recommendation, but they will make an independent assessment and decision.</li>
        <li>Consideration of all previous offending behaviours.</li>
        <li>Consideration of the risk the prisoner would present if released under the proposed RMP.</li>
        <li>Consideration of how realistic management in the community will be in terms of risk and likely compliance.</li>
        <li>You do not need to write out all the information in the previous 3 points but that you have considered it in your recommendation.</li>
        <li>Consideration of information and assessments provided by specialists (including the prisoner’s legal team) and prison staff - it’s helpful to comment on any differences between these.</li>
        <li>Remember that the Parole Board cannot direct a move to open conditions in all cases.</li>
        <li>An agreed HMPPS recommendation, if possible. If you have a different view to the prison offender manager you should fully explore and try to resolve it before writing the report. If you cannot agree you should explain this and make your recommendation clear.</li>
        <li>Evidenced reasons for not supporting release which flow logically from the main body of your report.</li>
        <li>A detailed account of the prisoner’s next steps if you are not supporting release, for example, progression pathways or a transfer to another prison to complete an intervention. Clarify when they will happen.</li>
        <li>An explanation if there are outstanding reports required to make a full decision, for example, psychology or post-programme reports - include a time frame. Should the Parole Board require an addendum, they can be made available before the oral hearing.</li>
    </ul>
}

@popup(reportForm, encrypter, "Recommendation", 19) {

    <div class="govuk-warning-text moj-warning-text">
        <span aria-hidden="true" class="govuk-warning-text__icon">!</span>
        <strong class="govuk-warning-text__text">
            <span class="govuk-warning-text__assistive">Warning</span>
            It is a mandatory action to liaise with the Prison Offender Manager and ensure their views are incorporated into the recommendation.
        </strong>
    </div>

    <div class="govuk-form-group @if(!reportForm.errors("prisonLiaisonConfirm").isEmpty) { govuk-form-group--error}">
        <fieldset class="govuk-fieldset">
            <legend class="govuk-fieldset__legend govuk-label govuk-visually-hidden">Prison Liaison</legend>
            <div class="govuk-checkboxes" data-module="checkboxes">
                @checkbox(reportForm("prisonLiaisonConfirm"), '_label -> "I confirm that I have had sight of the On/post Tariff Parole Custody Report and liaised with the Prison Offender Manager and their views around the assessment and recommendation have been taken into account in this report.")
            </div>
        </fieldset>
    </div>

    <hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible" />

    @textarea(reportForm("recommendation"), '_label -> "What is your recommendation?", '_hint -> recommendationHint, 'class -> "wide")
}
