@import data._
@import helper._
@import paroleParom1Report.hiddenInputs._
@import play.Environment
@import helpers.CallHelper.relative
@import org.webjars.play.WebJarsUtil

@this(implicit webJarsUtil: WebJarsUtil, environment: Environment)

@(reportForm: Form[ParoleParom1ReportData], encrypter: String => String, reviewPage: Int)

    @implicitField = @{ FieldConstructor(govukElements.f) }

@main("Report saved") {

    <div class="govuk-box-highlight margin-top medium">

        <h1 class="heading-large">Report saved</h1>

        <p class="font-medium">Your report has been saved and uploaded to Delius</p>

    </div>
    <div class="highlight-border margin-top medium">
        <h2 class="heading-large">What to do next</h2>
        <ul class="next-steps">
            <li>
                <div id="view-pdf">
                    <div>Review and print your 'Parole Report - Parom 1'</div>
                    <a class="bold-medium clickable" tabindex="1" href="@relative(routes.ParoleParom1ReportController.getPdf(encrypter(reportForm("documentId").getValue.getOrElse("")), encrypter(reportForm("onBehalfOfUser").getValue.getOrElse(""))))" aria-label="View PDF">View your completed PDF report</a>
                </div>
            </li>
            <li>
                <div id="edit-pdf">
                    <div>Check or edit your report again</div>
                    <a class="nav-item bold-medium clickable" tabindex="1" href="javascript:void(0);" data-target="@reviewPage" aria-label="Update report">Select a section to update or change</a>
                </div>
            </li>
            <li>
                <div id="close-report">
                    <div>Close this report</div>
                    <a class="bold-medium clickable" tabindex="1" href="javascript:closePopup()" aria-label="Return to Delius">Return back to the main Delius window</a>
                </div>
            </li>
        </ul>
    </div>

    <p class="margin-top large">
        <a href="javascript:void(0);" class="feedback-link" aria-label="Enter feedback">What did you think of this service?</a><span>&nbsp;(takes 30 seconds)</span>
    </p>

        @helper.form(action = relative(routes.ShortFormatPreSentenceReportController.wizardPost()), 'id -> "ndForm", 'novalidate -> "") {
            @CSRF.formField

            <input type="hidden" name="jumpNumber" id="jumpNumber"/>
            <input type="hidden" name="pageNumber" id="pageNumber" value="@reviewPage"/>

            @commonFields(reportForm, encrypter)
        }
}

<script type="text/javascript">
    function closePopup () {
        window.close()
    }
</script>
