@import data._
@import helper._
@import play.Environment
@import helpers.CallHelper.relative
@import org.webjars.play.WebJarsUtil

@this(implicit webJarsUtil: WebJarsUtil, environment: Environment)

@(reportForm: Form[ShortFormatPreSentenceReportData], encrypter: String => String, message: String, reviewPage: Int)

    @implicitField = @{ FieldConstructor(govukElements.f) }

@main("Draft report saved - Short Format Pre Sentence Report") {

    <div class="govuk-box-highlight margin-top medium">

        <h1 class="heading-large">Draft report saved</h1>

        <p class="font-medium">Your report has been saved and successfully uploaded to Delius</p>

    </div>
    <div class="highlight-border margin-top medium">
        <h2 class="heading-large">What to do next</h2>
        <ul class="next-steps">
            <li>
                <div id="view-pdf">
                    <div>Review and print your draft 'Short Format Pre-sentence Report'</div>
                    <a class="bold-medium clickable" tabindex="1" href="@relative(routes.ShortFormatPreSentenceReportController.getPdf(encrypter(reportForm("documentId").getValue.getOrElse("")), encrypter(reportForm("onBehalfOfUser").getValue.getOrElse(""))))">View your draft PDF report</a>
                </div>
            </li>
            <li>
                <div id="edit-pdf">
                    <div>Check or edit your report again</div>
                    <a class="nav-item bold-medium clickable" tabindex="1" href="javascript:void(0);" data-target="@reviewPage">Select a section to update or change</a>
                </div>
            </li>
            <li>
                <div id="document-list">
                    <div>Close this report</div>
                    <a class="bold-medium clickable" tabindex="1" href="javascript:documentList()">View your document list</a>
                </div>
            </li>
        </ul>
    </div>

    <p class="margin-top large">
        <a href="javascript:void(0);" class="feedback-link">What did you think of this service?</a><span>&nbsp;(takes 30 seconds)</span>
    </p>

        @helper.form(action = relative(routes.ShortFormatPreSentenceReportController.wizardPost()), 'id -> "ndForm", 'novalidate -> "") {
            @CSRF.formField

            <input type="hidden" name="jumpNumber" id="jumpNumber"/>
            @inputHidden(reportForm("pageNumber"))

            @inputHidden(reportForm("visitedPages"))

            @inputHidden(reportForm("onBehalfOfUser"), encrypter)
            @inputHidden(reportForm("entityId"), encrypter)
            @inputHidden(reportForm("documentId"), encrypter)

            @inputHidden(reportForm("name"), encrypter)
            @inputHidden(reportForm("dateOfBirth"), encrypter)
            @inputHidden(reportForm("age"), encrypter)
            @inputHidden(reportForm("address"), encrypter)
            @inputHidden(reportForm("crn"), encrypter)
            @inputHidden(reportForm("pnc"), encrypter)

            @inputHidden(reportForm("pncSupplied"))
            @inputHidden(reportForm("addressSupplied"))

            @inputHidden(reportForm("court"), encrypter)
            @inputHidden(reportForm("dateOfHearing"), encrypter)
            @inputHidden(reportForm("localJusticeArea"), encrypter)

            @inputHidden(reportForm("interviewInformationSource"))
            @inputHidden(reportForm("serviceRecordsInformationSource"))
            @inputHidden(reportForm("cpsSummaryInformationSource"))
            @inputHidden(reportForm("oasysAssessmentsInformationSource"))
            @inputHidden(reportForm("previousConvictionsInformationSource"))
            @inputHidden(reportForm("victimStatementInformationSource"))
            @inputHidden(reportForm("childrenServicesInformationSource"))
            @inputHidden(reportForm("policeInformationSource"))
            @inputHidden(reportForm("sentencingGuidelinesInformationSource"))
            @inputHidden(reportForm("otherInformationSource"))
            @inputHidden(reportForm("otherInformationDetails"))

            @inputHidden(reportForm("mainOffence"))
            @inputHidden(reportForm("otherOffences"))
            @inputHidden(reportForm("offenceSummary"))

            @inputHidden(reportForm("offenceAnalysis"))
            @inputHidden(reportForm("patternOfOffending"))

            @inputHidden(reportForm("issueAccommodation"))
            @inputHidden(reportForm("issueEmployment"))
            @inputHidden(reportForm("issueFinance"))
            @inputHidden(reportForm("issueRelationships"))
            @inputHidden(reportForm("issueSubstanceMisuse"))
            @inputHidden(reportForm("issueHealth"))
            @inputHidden(reportForm("issueBehaviour"))
            @inputHidden(reportForm("issueOther"))
            @inputHidden(reportForm("issueAccommodationDetails"))
            @inputHidden(reportForm("issueEmploymentDetails"))
            @inputHidden(reportForm("issueFinanceDetails"))
            @inputHidden(reportForm("issueRelationshipsDetails"))
            @inputHidden(reportForm("issueSubstanceMisuseDetails"))
            @inputHidden(reportForm("issueHealthDetails"))
            @inputHidden(reportForm("issueBehaviourDetails"))
            @inputHidden(reportForm("issueOtherDetails"))

            @inputHidden(reportForm("likelihoodOfReOffending"))

            @inputHidden(reportForm("riskOfSeriousHarm"))
            @inputHidden(reportForm("previousSupervisionResponse"))
            @inputHidden(reportForm("additionalPreviousSupervision"))

            @inputHidden(reportForm("proposal"))

            @inputHidden(reportForm("reportAuthor"))
            @inputHidden(reportForm("office"))
            @inputHidden(reportForm("courtOfficePhoneNumber"))
            @inputHidden(reportForm("counterSignature"))
            @inputHidden(reportForm("reportDate"))

        }
}

<script type="text/javascript">
        function documentList () {
            parent.postMessage('@message', '*');
        }
</script>
