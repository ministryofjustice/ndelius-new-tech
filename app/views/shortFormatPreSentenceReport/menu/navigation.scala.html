@import helper._
@import data.viewModel.PageStatus

@(current: Int)(implicit pageStatuses: Map[Int, PageStatus])

@renderNavigation(entries: Seq[String]) = {

    @virtualPageLoad(current)

    <nav class="js-stick-at-top-when-scrolling">

        <h3 class="font-xsmall bold margin-top medium">Report sections:</h3>

        <span class="display-block margin-top"></span>

        <ul>
        @for((entry, index) <- entries.zipWithIndex) {
            @navigationEntry(index + 2, entry, current)
        }
        </ul>
    </nav>
}

@navigationEntries(renderNavigation, entries => {

    if (pageStatuses.values().drop(1).dropRight(1).exists { pageStatus => !(pageStatus.isVisited && pageStatus.isValid) })
        entries.dropRight(1)
    else
        entries
})
